---
title: Workaholic
order: 1
---

# Workaholic

[Workaholic](https://github.com/edmundhung/workaholic) is a toolkit for parsing your files into Worker KV entries with a pipeline-like plugin system. It is...

- **Extensible** - Customises the build and query with plugins
- **Batteries-included** - Works out of the box with built-in plugins
- **No-code solution** - Ships your data as an API without the need to write a worker

## How is it different from serving assets files directly?

There are 2 main reasons you might want to use Workaholic:

1. Preprocessing: Instead of re-processing the files every time on the server or client, the plugin system allows you to preprocess it once and save the result directly in Worker KV.
2. Indexing: The KV `List` API is rather limited on how you can query entries and also costly compared to the `Get` call. Workaholic enables a simpler setup on building your own index which you can retrieve with a single `Get`.

## How it works

In order to have a better understanding of what it does, it is recommended to take a look at both this [demo site](https://demo.workaholic.site) and its [source code](https://github.com/edmundhung/workaholic-site-template).

In the repository, there are few things you should be aware of:

1. The `content` directory - This is where the content of the demo site is located.
2. The `plugins` directory - This includes an example of how you can set up a custom plugin.
3. The `wrangler.toml` file - This lets you configure both wrangler and the Workaholic CLI.

The demo site itself is a basic React app that could be found under the `site` directory and is served with the Cloudflare Pages. What is important here is how the content is being served with the Cloudflare Workers on top of it.

First, there is a [publish workflow](https://github.com/edmundhung/workaholic-site-template/blob/main/.github/workflows/publish.yml) set in the repository which keep tracks of the `content` directory. It calls the Workaholic CLI for processing the files within the directory and then upload th result KV data to Cloudflare.
You can read about the details of the build process in the [Build](./concepts) section.

Then, there is a worker script being deployed to Cloudflare through the [deploy workflow](https://github.com/edmundhung/workaholic-site-template/blob/main/.github/workflows/deploy.yml). This worker script is not committed to the repository as it could be built with the Workaholic CLI within the job. This worker serves the KV data following a certain schemea described in the [Query](./concepts) section.

For example, if you check the network tab from the inspecter, there are 2 API requests sent out when you visit the demo site:

**1. https://demo.workaholic.site/api/data/index**

```json
{
  "content": "# Workaholic\n\nWorkaholic is a toolkit for managing your files as Worker KV entry. It is...(omitted)",
  "metadata": {
    "title": "Workaholic",
    "order": 1
  }
}
```

The first API response is basically the content of [/content/index.md](https://github.com/edmundhung/workaholic-site-template/blob/main/content/index.md) with the front matter parsed and presented as `metadata`. This is done by the `plugin-frontmatter` configured in the `wrangler.toml`.

**2. https://demo.workaholic.site/api/list**

```json
[
  {
    "slug": "index",
    "metadata": { "title":"Workaholic", "order": 1 }
  },
  {
    "slug": "how-it-works",
    "metadata": { "title": "How it works", "order": 2 }
  },
  {
    "slug": "plugins",
    "metadata": { "title": "Plugins", "order": 3 }
  },
  {
    "slug": "configuration",
    "metadata": { "title": "Configuration", "order": 4 }
  }
]
```

The second API response is the list of pages available. This is generated by `plugin-list` which gathers the `slug` of the page with its `metadata` based on the provided path. However, in order to add a custom sorting logic by the `order` field, it is wrapped as a custom plugin defined in [/plugins/list.ts](https://github.com/edmundhung/workaholic-site-template/blob/main/plugins/list.ts). It is important to note that this plugin is effective only when it is set after the `plugin-frontmatter` plugin configuration as it expects the `order` field to be presented in the `metadata`.

For details of how these default plugin works, check out the [Plugins](./plugins) page.

## Is it production-ready?

No. This project starts with a simple script and eventually turns into an over-engineered solution with wider scope. It is experimental and probably buggy at the moment, but I wish this demo can give you an idea of what it is capable of for now.

## Known issues

- The tool does not take the max entry size (25MB) into account at the moment.
- For plugins with custom `setupQuery` logic, it might fail if it imports any node packages, eg. `fs` / `path`.
